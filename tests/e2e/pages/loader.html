<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DUMMY</title>
  <script src="../../../dist/naive.js"></script>
  <link rel="stylesheet" href="../assets/styles/index.css">
</head>
<body>

  <div class="dom-ready"></div>

  <div class="flex-row">
    <div class="flex-sm-4 flex-sm-offset-4">
      <span>Queued: </span>
      <span class="queue-counter">0</span>
    </div>
    <div class="flex-sm-4">
      <span>Loaded: </span>
      <span class="assets-counter">0</span>
    </div>
  </div>

  <div class="flex-row">
    <div class="flex-sm-4">
        <button class="add-audio">Add Audio</button>
        <button class="add-image">Add Image</button>
        <button class="add-json">Add JSON</button>
        <button class="add-audio">Start</button>
        <button class="load-audio">Load Audio</button>
        <button class="load-image">Load Image</button>
        <button class="load-json">Load JSON</button>
        <button class="console-log">console.log(loader)</button>
    </div>

    <div class="flex-sm-4"></div>

    <div class="flex-sm-4">
      <div class="audio-container"></div>
      <div class="images-container"></div>
      <div class="json-container"></div>
    </div>
  </div>

<script>

  window.addEventListener('load', function () {
    var ready = document.querySelector('.dom-ready');
    ready.innerText = 'DOM READY';
  });

  var loader = new naive.Loader();
  var promise = null;
  var addAudio = document.querySelector('.add-audio');
  var loadAudio = document.querySelector('.load-audio');
  var addImage = document.querySelector('.add-image');
  var addJSON = document.querySelector('.add-json');
  var loadImage = document.querySelector('.load-image');
  var loadJSON = document.querySelector('.load-json');
  var JSONContainer = document.querySelector('.json-container');
  var imagesContainer = document.querySelector('.images-container');
  var audioContainer = document.querySelector('.audio-container');
  var assetsCounter = document.querySelector('.assets-counter');
  var queueCounter = document.querySelector('.queue-counter');
  var consoleLog = document.querySelector('.console-log');

  loader.onAssetLoaded.add(function () {
    assetsCounter.innerText = loader.cache.length;
  });

  addAudio.addEventListener('click', function () {
    loader.addAudio('../assets/audio/tic.mp3');
    queueCounter.innerText = loader.queue.length;
  });

  addImage.addEventListener('click', function () {
    loader.addImage('../assets/audio/tic.mp3');
    queueCounter.innerText = loader.queue.length;
  });

  addJSON.addEventListener('click', function () {
    loader.addJSON('../assets/audio/tic.mp3');
    queueCounter.innerText = loader.queue.length;
  });

  // loader.start();

  loadJSON.addEventListener('click', function () {
    promise = loader.loadJSON('../assets/json/test.json');
    promise.then(function (json) {
      var child = document.createElement('div');
      child.innerText = JSON.stringify(json);
      JSONContainer.appendChild(child);
    });
  });

  loadImage.addEventListener('click', function () {
    promise = loader.loadImage('../assets/images/brick.png');
    promise.then(function (img) {
      img.setAttribute('class', 'brick');
      imagesContainer.appendChild(img);
    });
  });

  loadAudio.addEventListener('click', function () {
    promise = loader.loadAudio('../assets/audio/tic.mp3');
    promise.then(function (audio) {
      audio.setAttribute('class', 'tic');
      audio.setAttribute('controls', 'true');
      audioContainer.appendChild(audio);
    });
  });

  consoleLog.addEventListener('click', function () {
    console.log(loader);
  });

</script>

</body>
</html>